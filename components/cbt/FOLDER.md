<!-- INPUT: CBT 组件目录结构与职责说明（含统计入口卡片精简展示、AI 文本清理、月份导航统一、无记录占位与情绪配色优化）。 -->
<!-- OUTPUT: CBT 组件目录文档（含统计入口精简展示与 AI 文本净化更新说明、月份导航统一、无记录处理与占星分行优化）。 -->
<!-- POS: CBT 组件目录说明；若更新此文件，务必更新本头注释。 -->
一旦我被更新，务必更新我的开头注释，以及所属的文件夹的md。

# components/cbt/

CBT（认知行为疗法）日记功能的 UI 组件集合。

## 文件清单

| 文件 | 职责 |
|------|------|
| `types.ts` | CBT 数据类型定义（snake_case 字段与嵌套键） |
| `CBTMainPage.tsx` | CBT 主页面组件，集成到 `/journal` 路由并接收用户资料 |
| `CBTWizard.tsx` | 10 步 CBT 记录向导（含分析失败提示与重试） |
| `TimelineFeed.tsx` | 历史记录时间线侧边栏 |
| `CalendarStats.tsx` | 日历与统计主区域（单屏 31 天布局） |
| `RecordDetailModal.tsx` | 记录详情弹窗 |
| `ReportDashboard.tsx` | AI 分析报告展示面板（单列纵向模块，安全文本处理、编号换行、内容控制与占星条目拆分） |
| `AnalysisViews.tsx` | 统计分析视图（躯体模式、情绪构成、CBT 能力等，月份联动过滤、情绪映射优化与圆环配色统一） |
| `LoadingNebula.tsx` | 加载动画组件 |
| `MoodIcon.tsx` | 情绪图标组件 |
| `utils/mockData.ts` | Mock 数据生成器（首次使用时填充示例数据） |
| `mockData.ts` | Mock 数据生成器（旧版入口，保留兼容） |

## 依赖

- `services/cbt/deepseekService.ts`：AI 分析后端调用（通过 API）
- `recharts`：图表可视化

## 近期更新

- 统一 CBT 子模块的暗金色调与情绪色板，保持字体与色彩克制。
- 压缩日历格子与间距，确保单屏显示完整月份并保留上下间距。
- 报告模块改为纵向单列展示，顶部情绪提示更清晰可见。
- 主界面整体上移以匹配导航间距，日历标题字号放大并居中对齐底部按钮区。
- 日记填写输入区提升对比度与底色层级，改善可读性。
- CBT 各面板在 light 模式下提升边框与金色文字对比度。
- CBT 报告卡片间距收紧，标签字号上调以增强可读性。
- 日记解读弹窗与报告面板扩展至 1280px，并在大屏改为双列卡片布局。
- CBT 分析失败时新增重试入口，保留提交记录便于再次解读。
- CBT 报告组件对异常内容进行安全文本处理，避免渲染崩溃。
- CBT 报告模块按顺序改为单列纵向展示，避免并排布局。
- 占星解读段落遇到编号内容时改为数字换行展示。
- 占星解读中的占星配置信息拆分为逐条展示，避免聚合成一行。
- 占星解读全文展示，去除省略号并保持解读完整度。
- 占星解读中的本命盘与行运盘信息分行展示，避免混排。
- 统计分析视图月份导航在小屏改为居中显示，避免按钮重叠。
- 统计分析视图的年月导航与关闭按钮统一为同一行与同一视觉风格。
- 统计视图跟随日历当前月份过滤，避免混入历史数据。
- 情绪分类映射扩展并减少“其他未分类”，圆环配色与情绪笑脸保持一致。
- 练习建议改为分行展示，英文标题改用 sans-serif 避免宋体感。
- 统计入口四卡改为迷你卡片布局，仅保留 icon + 短标题以贴近探索自我风格。
- 统计分析视图新增 AI 输出文本清理，移除多余 Markdown 标记与引号。
- 统计入口卡片标题在中文压缩至 2 字内，英文模式隐藏标题以避免溢出。
- 统计分析视图在当月无记录时跳过 AI 请求，解读统一显示“无记录”。
- 时间线心情形容词颜色与表情主色同步。
