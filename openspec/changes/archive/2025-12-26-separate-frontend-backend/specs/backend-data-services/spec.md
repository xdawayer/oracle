<!-- INPUT: 后端数据服务能力变更需求。 -->
<!-- OUTPUT: OpenSpec 后端数据服务增量规范。 -->
<!-- POS: 能力变更规范文件；若更新此文件，务必更新本头注释与所属文件夹的 FOLDER.md。 -->
## ADDED Requirements
### Requirement: Real data computation service
系统 SHALL 提供后端服务计算真实天文数据（如行星位置、宫位、相位），并基于用户输入生成可复用结果。

#### Scenario: Real data generated from user input
- **WHEN** 用户提交出生信息
- **THEN** 后端返回真实星盘数据并可被多个页面复用

### Requirement: AI content generation service
系统 SHALL 提供后端 AI 生成服务，基于用户数据与提问生成解读内容（本命盘、行运、合盘、问答、CBT）。

#### Scenario: AI data generated by scenario
- **WHEN** 用户进入特定页面或提交问题
- **THEN** 后端使用对应场景的 Prompt 生成 AI 数据

### Requirement: Prompt catalog per surface
系统 SHALL 为每个页面/场景维护独立 Prompt，并支持按类型与版本管理（如合盘类型、问答类型）。

#### Scenario: Prompt selection by surface
- **WHEN** 请求指定页面或类型的 AI 内容
- **THEN** 后端选择匹配的 Prompt 版本生成结果

### Requirement: Bilingual content payloads
系统 SHALL 为所有文本内容返回 `zh` 与 `en` 两套语言字段，不依赖实时翻译。

#### Scenario: Dual-language response
- **WHEN** 后端返回文本数据
- **THEN** 返回内容包含 `zh` 与 `en` 字段供前端切换

### Requirement: Cache policy for data layers
系统 SHALL 为 Real Data 与 AI Data 建立缓存策略，并按数据变化规则失效。

#### Scenario: Cached data invalidation
- **WHEN** 用户修改输入或缓存过期
- **THEN** 相关 Real Data 与 AI Data 被重新计算并更新缓存
