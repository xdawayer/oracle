<!-- INPUT: 变更的架构决策与迁移方案（含 DeepSeek 配置确认）。 -->
<!-- OUTPUT: OpenSpec 设计说明文档。 -->
<!-- POS: 设计决策记录（已补充 DeepSeek 配置）；若更新此文件，务必更新本头注释与所属文件夹的 FOLDER.md。 -->
## 背景与约束
- 现有主应用包含简化版 CBT 日记，完整实现位于独立 `cbt/` 子应用。
- 需要统一入口与体验，并在迁移后移除 `cbt/` 目录。
- CBT 分析需改为 DeepSeek 后端生成。

## 目标 / 非目标
- 目标：将 `cbt/` 的完整体验迁移为主应用 `/journal` 的正式界面。
- 目标：移除主应用内旧 CBT 简化实现与重复内容。
- 目标：CBT 分析调用 DeepSeek 后端（API Key 不写入仓库）。
- 非目标：重构非 CBT 功能模块或更改其它页面结构。

## 关键决策
- 入口定位：保留顶部导航 CBT 日记入口，点击后路由至 `/journal`。
- 目录落位：将 `cbt/` 的组件与类型迁移到主应用目录（例如 `components/cbt/*`、`services/cbt/*`），以便与主应用构建流程一致。
- 数据与存储：复用 `cbt/` 的本地存储逻辑与数据结构，统一在主应用内使用。
- 后端集成：新增 DeepSeek 服务层，使用环境变量 `VITE_DEEPSEEK_API_KEY` 与 `VITE_DEEPSEEK_BASE_URL` 注入配置，不直接写入代码库。

## 风险与权衡
- 迁移涉及大量文件移动与引用更新，需谨慎处理导入路径与样式资源。
- DeepSeek 后端调用将引入网络依赖，需处理失败与降级策略。

## 迁移计划
1. 将 `cbt/` 子应用组件、类型与服务迁入主应用目录结构。
2. 用迁移后的 CBT 一级界面替换主应用 `/journal` 内容。
3. 移除主应用内旧 CBT 简化实现与相关常量。
4. 替换分析服务为 DeepSeek 后端，并通过环境变量注入密钥。
5. 删除 `cbt/` 目录并更新所有受影响的 `FOLDER.md` 与文件头注释。

## 已确认配置
- 环境变量：`VITE_DEEPSEEK_API_KEY` 与 `VITE_DEEPSEEK_BASE_URL`。
- API Key 仅存于 `.env.local` 或部署环境，不写入仓库。
